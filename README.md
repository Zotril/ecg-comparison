# ECG Signal Processing

Цей проєкт аналізує сигнали ЕКГ за допомогою різних алгоритмів детекції R-вершин. Він дозволяє обробляти дані з двох різних баз даних, порівнювати результати детекції та зберігати графіки для подальшого аналізу.

## Вимоги до середовища

Для запуску проєкту вам необхідно:

1. **Python:** 3.8 або вище.
2. **Бібліотеки:** Встановіть залежності, що вказані нижче
numpy
matplotlib
scipy
pandas
wfdb
pywavelets
ecg-detectors

## Структура проєкту

- **`datasets/`**: Містить `.tsv` файли із сигналами ЕКГ для тестування.
- **`results/`**: Зберігаються результати графіків обробки сигналів.
- **`templates.py`**: Раніше використовувався для запуску matched filters, якщо частота сигналу була відмінна від 250 або 360 Hz.
- **`peaks.py`**: Додатковий функціонал для анотування R-вершин власноруч, якщо анотованих міток немає.
- **`main.py`**: Головний файл, який запускає весь функціонал проєкту.

## Як використовувати

1. **Запуск алгоритму для аналізу сигналу:**
   - У файлі `main.py` закоментовано кілька блоків коду, кожен з яких відповідає за різні алгоритми детекції R-вершин, наприклад: `Pan-Tompkins`, `Hamilton`, `Engzee`, тощо.
   - Для виконання аналізу на одному або кількох наборах даних розкоментуйте відповідні алгоритми як вгорі, так і внизу файлу `main.py`.

2. **Приклад виконання:**
   - Використання `Christov detector`:
     ```python
     r_peaks1 = detectors1.christov_detector(unfiltered_ecg)
     ```
   - Інші алгоритми: `pan_tompkins_detector`, `hamilton_detector`, `engzee_detector` і т.д.

3. **Дані:**
   - Перший набір даних береться з файлу `datasets/ecg.tsv`. Переконайтеся, що сигнал відповідає частоті 250 Hz або 360 Hz.
   - Другий набір треба завантажити 1.7 ГБ датасету з https://physionet.org/content/ptb-xl/1.0.3/#files-panel. Після завантаження та розархівації датасету необхідно подати path у локальну змінну з файлу main.py 81 рядок data_path = r'put_path_to_dataset'
   - Якщо частота відрізняється, використовуйте додаткову обробку у `templates.py`.
   - Код дозволяє порівняти результати детекції R-вершин на різних наборах даних (наприклад, `Normal`, `MI`, `Hyp`). Розкоментуйте відповідні алгоритми в секціях для кожної бази.

4. **Приклади роботи:**
   - Результати аналізу зберігаються у папці `results/`.

## Приклад запуску

Для запуску основного коду:
У моєму випадку py, python та python3 вказують на одну версію 3.13 тому необхідно зважати на ващі налаштування.
```bash
py .\main.py
```

Графіки результатів будуть автоматично відображені, а також їх можна зберегти або у папці `results/`, або у іншому місці.
